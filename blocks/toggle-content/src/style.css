/* --- Editor Styles --- */
/* Dans l'éditeur, on affiche toujours les deux groupes pour permettre l'édition */
/* On ajoute juste un indicateur visuel pour montrer quel groupe est actif */
/* Ces styles ne s'appliquent que dans l'éditeur grâce au sélecteur .block-editor-inner-blocks */

/* Styles pour les onglets de l'éditeur */
.g2rd-toggle-editor-tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  padding: 10px;
  background: #f0f0f1;
  border-radius: 4px;
}

/* Conteneur des InnerBlocks dans l'éditeur */
.g2rd-toggle-content-editor {
  position: relative;
}

.wp-block-g2rd-toggle-content
  .g2rd-toggle-content-editor
  > .block-editor-inner-blocks
  > .block-editor-block-list__layout
  > .wp-block {
  position: relative;
  margin-bottom: 20px;
  padding: 15px;
  border: 2px dashed #ccc;
  border-radius: 4px;
  min-height: 100px;
}

/* Afficher le groupe actif dans l'éditeur */
.wp-block-g2rd-toggle-content
  .g2rd-toggle-content-editor
  .block-editor-inner-blocks
  .block-editor-block-list__layout
  > .wp-block-group.g2rd-toggle-editor-active {
  display: block !important;
  border-color: #2196f3;
  background-color: rgba(33, 150, 243, 0.05);
}

/* Masquer le groupe inactif dans l'éditeur */
.wp-block-g2rd-toggle-content
  .g2rd-toggle-content-editor
  .block-editor-inner-blocks
  .block-editor-block-list__layout
  > .wp-block-group.g2rd-toggle-editor-hidden {
  display: none !important;
}

/* Styles pour tous les groupes dans l'éditeur */
.wp-block-g2rd-toggle-content
  .g2rd-toggle-content-editor
  .block-editor-inner-blocks
  .block-editor-block-list__layout
  > .wp-block-group {
  position: relative;
  margin-bottom: 20px;
  padding: 15px;
  border: 2px dashed #ccc;
  border-radius: 4px;
  min-height: 100px;
}

/* Indicateur pour le groupe actif (celui qui sera visible par défaut) */
.wp-block-g2rd-toggle-content.show-left
  .block-editor-inner-blocks
  > .block-editor-block-list__layout
  > .wp-block:first-child::before {
  content: "✓ Contenu de gauche (visible par défaut)";
  position: absolute;
  top: -12px;
  left: 10px;
  background: #2196f3;
  color: white;
  padding: 2px 8px;
  font-size: 11px;
  border-radius: 3px;
  font-weight: bold;
  z-index: 10;
}

.wp-block-g2rd-toggle-content.show-left
  .block-editor-inner-blocks
  > .block-editor-block-list__layout
  > .wp-block:first-child {
  border-color: #2196f3;
  background-color: rgba(33, 150, 243, 0.05);
}

.wp-block-g2rd-toggle-content.show-left
  .block-editor-inner-blocks
  > .block-editor-block-list__layout
  > .wp-block:nth-child(2)::before {
  content: "Contenu de droite (masqué par défaut)";
  position: absolute;
  top: -12px;
  left: 10px;
  background: #999;
  color: white;
  padding: 2px 8px;
  font-size: 11px;
  border-radius: 3px;
  font-weight: bold;
  z-index: 10;
}

.wp-block-g2rd-toggle-content.show-right
  .block-editor-inner-blocks
  > .block-editor-block-list__layout
  > .wp-block:first-child::before {
  content: "Contenu de gauche (masqué par défaut)";
  position: absolute;
  top: -12px;
  left: 10px;
  background: #999;
  color: white;
  padding: 2px 8px;
  font-size: 11px;
  border-radius: 3px;
  font-weight: bold;
  z-index: 10;
}

.wp-block-g2rd-toggle-content.show-right
  .block-editor-inner-blocks
  > .block-editor-block-list__layout
  > .wp-block:nth-child(2)::before {
  content: "✓ Contenu de droite (visible par défaut)";
  position: absolute;
  top: -12px;
  left: 10px;
  background: #2196f3;
  color: white;
  padding: 2px 8px;
  font-size: 11px;
  border-radius: 3px;
  font-weight: bold;
  z-index: 10;
}

.wp-block-g2rd-toggle-content.show-right
  .block-editor-inner-blocks
  > .block-editor-block-list__layout
  > .wp-block:nth-child(2) {
  border-color: #2196f3;
  background-color: rgba(33, 150, 243, 0.05);
}

/* --- Frontend & Editor Preview --- */
.g2rd-toggle-switch-preview,
.g2rd-toggle-switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
  cursor: pointer;
}

.g2rd-toggle-slider-preview,
.g2rd-toggle-slider {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--g2rd-toggle-inactive-color, #ccc);
  transition: 0.4s;
}

.g2rd-toggle-slider-preview::before,
.g2rd-toggle-slider::before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: 0.4s;
}

/* Rounded Style */
.g2rd-toggle-switch-preview.rounded .g2rd-toggle-slider-preview,
.g2rd-toggle-switch.is-style-rounded .g2rd-toggle-slider {
  border-radius: 34px;
}
.g2rd-toggle-switch-preview.rounded .g2rd-toggle-slider-preview::before,
.g2rd-toggle-switch.is-style-rounded .g2rd-toggle-slider::before {
  border-radius: 50%;
}

/* --- Frontend Logic --- */
/* Quand la checkbox est cochée, on montre le bloc de droite et on masque celui de gauche */
.wp-block-g2rd-toggle-content
  .g2rd-toggle-checkbox:checked
  + .g2rd-toggle-container
  + .g2rd-toggle-content-container
  > .wp-block-group:first-child {
  display: none;
}
.wp-block-g2rd-toggle-content
  .g2rd-toggle-checkbox:checked
  + .g2rd-toggle-container
  + .g2rd-toggle-content-container
  > .wp-block-group:last-child {
  display: block;
}

/* Par défaut (non coché), on montre le bloc de gauche et on masque celui de droite */
.wp-block-g2rd-toggle-content
  .g2rd-toggle-checkbox:not(:checked)
  + .g2rd-toggle-container
  + .g2rd-toggle-content-container
  > .wp-block-group:first-child {
  display: block;
}
.wp-block-g2rd-toggle-content
  .g2rd-toggle-checkbox:not(:checked)
  + .g2rd-toggle-container
  + .g2rd-toggle-content-container
  > .wp-block-group:last-child {
  display: none;
}

/* Appliquer la couleur active et la transformation quand la case est cochée */
.wp-block-g2rd-toggle-content
  .g2rd-toggle-checkbox:checked
  + .g2rd-toggle-container
  .g2rd-toggle-slider {
  background-color: var(--g2rd-toggle-active-color, #2196f3);
}

.wp-block-g2rd-toggle-content
  .g2rd-toggle-checkbox:checked
  + .g2rd-toggle-container
  .g2rd-toggle-slider::before {
  transform: translateX(26px);
}
